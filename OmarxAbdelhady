<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>موقع البومودورو والساعة</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            overflow: hidden;
            height: 100vh;
            color: white;
            transition: all 0.3s ease;
        }

        #video-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            z-index: -1;
        }

        /* زر تحميل الفيديو في الزاوية العلوية اليسرى */
        .video-upload-container {
            position: fixed;
            top: 15px;
            left: 15px;
            z-index: 100;
            transition: all 0.3s ease;
        }

        #video-upload {
            display: none;
        }

        .upload-label {
            display: inline-block;
            width: 40px;
            height: 40px;
            background-color: rgba(0, 0, 0, 0.5);
            border-radius: 50%;
            cursor: pointer;
            text-align: center;
            line-height: 40px;
            font-size: 20px;
            color: white;
            transition: all 0.3s ease;
            backdrop-filter: blur(5px);
        }

        .upload-label:hover {
            background-color: rgba(0, 0, 0, 0.7);
            transform: scale(1.1);
        }

        /* عناصر التحكم بالفيديو */
        .video-controls {
            position: fixed;
            top: 65px;
            left: 15px;
            display: flex;
            flex-direction: column;
            gap: 8px;
            transition: all 0.3s ease;
        }

        .video-controls button {
            width: 35px;
            height: 35px;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            background-color: rgba(0, 0, 0, 0.5);
            color: white;
            font-size: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            backdrop-filter: blur(5px);
        }

        .video-controls button:hover {
            background-color: rgba(0, 0, 0, 0.7);
            transform: scale(1.1);
        }

        /* زر إخفاء الأزرار */
        .toggle-buttons {
            position: fixed;
            top: 15px;
            right: 15px;
            z-index: 100;
        }

        .toggle-btn {
            width: 35px;
            height: 35px;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            background-color: rgba(0, 0, 0, 0.5);
            color: white;
            font-size: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            backdrop-filter: blur(5px);
        }

        .toggle-btn:hover {
            background-color: rgba(0, 0, 0, 0.7);
            transform: scale(1.1);
        }

        /* البومودورو في الزاوية اليمنى السفلى */
        .pomodoro-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            text-align: center;
            z-index: 10;
            transition: all 0.3s ease;
            background-color: rgba(0, 0, 0, 0.4);
            padding: 15px;
            border-radius: 10px;
            backdrop-filter: blur(5px);
            min-width: 200px;
        }

        .timer-display {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 10px;
            font-family: 'Courier New', monospace;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.7);
            color: white;
        }

        .time-settings {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin-bottom: 10px;
        }

        .time-settings input {
            width: 60px;
            padding: 4px;
            text-align: center;
            background-color: rgba(255, 255, 255, 0.15);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 4px;
            font-size: 0.9rem;
        }

        .time-settings label {
            font-size: 0.8rem;
            margin-top: 2px;
        }

        .pomodoro-controls {
            display: flex;
            justify-content: center;
            gap: 8px;
        }

        .pomodoro-controls button {
            padding: 6px 12px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            font-size: 0.8rem;
            background-color: rgba(0, 0, 0, 0.5);
            color: white;
            backdrop-filter: blur(5px);
        }

        #start-pomodoro {
            background-color: rgba(76, 175, 80, 0.7);
        }

        #pause-pomodoro {
            background-color: rgba(255, 152, 0, 0.7);
        }

        #reset-pomodoro {
            background-color: rgba(244, 67, 54, 0.7);
        }

        .pomodoro-controls button:hover {
            opacity: 0.9;
            transform: translateY(-2px);
        }

        /* الساعة في الزاوية اليسرى السفلى */
        .clock-container {
            position: fixed;
            bottom: 20px;
            left: 20px;
            text-align: center;
            z-index: 10;
            transition: all 0.3s ease;
            background-color: rgba(0, 0, 0, 0.4);
            padding: 15px;
            border-radius: 10px;
            backdrop-filter: blur(5px);
        }

        .clock-display {
            font-size: 2.2rem;
            font-weight: bold;
            margin-bottom: 5px;
            font-family: 'Courier New', monospace;
            color: white;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.7);
        }

        .date-display {
            font-size: 1rem;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.7);
        }

        /* تأثيرات للبومودورو */
        .pomodoro-active {
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0% { text-shadow: 0 0 0 rgba(76, 175, 80, 0.7); }
            70% { text-shadow: 0 0 10px rgba(76, 175, 80, 0.7); }
            100% { text-shadow: 0 0 0 rgba(76, 175, 80, 0); }
        }

        /* حالة إخفاء الأزرار */
        .buttons-hidden .video-upload-container,
        .buttons-hidden .video-controls {
            opacity: 0;
            pointer-events: none;
        }

        /* تصميم متجاوب */
        @media (max-width: 768px) {
            .timer-display {
                font-size: 2rem;
            }
            
            .clock-display {
                font-size: 1.8rem;
            }
            
            .pomodoro-container, .clock-container {
                bottom: 15px;
            }
            
            .pomodoro-container {
                right: 15px;
            }
            
            .clock-container {
                left: 15px;
            }
        }

        @media (max-width: 480px) {
            .timer-display {
                font-size: 1.8rem;
            }
            
            .clock-display {
                font-size: 1.6rem;
            }
            
            .time-settings {
                flex-direction: column;
                align-items: center;
                gap: 5px;
            }
            
            .pomodoro-controls {
                flex-direction: column;
                gap: 5px;
            }
            
            .video-controls {
                top: 60px;
                left: 10px;
            }
            
            .video-upload-container {
                top: 10px;
                left: 10px;
            }
            
            .toggle-buttons {
                top: 10px;
                right: 10px;
            }
        }
    </style>
</head>
<body>
    <video id="video-background" autoplay muted loop>
        <!-- سيتم تحميل الفيديو من قبل المستخدم -->
    </video>
    
    <!-- صوت المنبه -->
    <audio id="alarm-sound" preload="auto">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-alarm-digital-clock-beep-989.mp3" type="audio/mpeg">
    </audio>
    
    <!-- زر تحميل الفيديو في الزاوية العلوية اليسرى -->
    <div class="video-upload-container">
        <input type="file" id="video-upload" accept="video/*">
        <label for="video-upload" class="upload-label" title="تحميل فيديو">📁</label>
    </div>
    
    <!-- أزرار التحكم بالفيديو -->
    <div class="video-controls">
        <button id="play-video" title="تشغيل الفيديو">▶</button>
        <button id="pause-video" title="إيقاف الفيديو">❚❚</button>
    </div>
    
    <!-- زر إخفاء الأزرار -->
    <div class="toggle-buttons">
        <button class="toggle-btn" id="toggle-buttons" title="إخفاء/إظهار الأزرار">👁</button>
    </div>
    
    <!-- البومودورو في الزاوية اليمنى السفلى -->
    <div class="pomodoro-container">
        <div class="timer-display" id="pomodoro-timer">25:00</div>
        <div class="time-settings">
            <div>
                <label for="hours-input">ساعة</label>
                <input type="number" id="hours-input" min="0" max="23" value="0">
            </div>
            <div>
                <label for="minutes-input">دقيقة</label>
                <input type="number" id="minutes-input" min="0" max="59" value="25">
            </div>
            <div>
                <label for="seconds-input">ثانية</label>
                <input type="number" id="seconds-input" min="0" max="59" value="0">
            </div>
        </div>
        <div class="pomodoro-controls">
            <button id="start-pomodoro">بدء</button>
            <button id="pause-pomodoro" disabled>إيقاف</button>
            <button id="reset-pomodoro">إعادة</button>
        </div>
    </div>
    
    <!-- الساعة في الزاوية اليسرى السفلى -->
    <div class="clock-container">
        <div class="clock-display" id="clock">00:00:00</div>
        <div class="date-display" id="date">اليوم، 1 يناير 2023</div>
    </div>

    <script>
        // عناصر DOM
        const videoBackground = document.getElementById('video-background');
        const videoUpload = document.getElementById('video-upload');
        const playVideoBtn = document.getElementById('play-video');
        const pauseVideoBtn = document.getElementById('pause-video');
        const alarmSound = document.getElementById('alarm-sound');
        
        const pomodoroTimer = document.getElementById('pomodoro-timer');
        const hoursInput = document.getElementById('hours-input');
        const minutesInput = document.getElementById('minutes-input');
        const secondsInput = document.getElementById('seconds-input');
        const startPomodoroBtn = document.getElementById('start-pomodoro');
        const pausePomodoroBtn = document.getElementById('pause-pomodoro');
        const resetPomodoroBtn = document.getElementById('reset-pomodoro');
        
        const clockDisplay = document.getElementById('clock');
        const dateDisplay = document.getElementById('date');
        
        const toggleButtonsBtn = document.getElementById('toggle-buttons');
        const body = document.body;
        
        // متغيرات البومودورو
        let pomodoroTime = 25 * 60; // 25 دقيقة بالثواني
        let pomodoroInterval;
        let isPomodoroRunning = false;
        let isPomodoroPaused = false;
        
        // تحميل الفيديو كخلفية
        videoUpload.addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                const videoURL = URL.createObjectURL(file);
                videoBackground.src = videoURL;
            }
        });
        
        // التحكم في تشغيل الفيديو
        playVideoBtn.addEventListener('click', function() {
            videoBackground.play();
        });
        
        pauseVideoBtn.addEventListener('click', function() {
            videoBackground.pause();
        });
        
        // تحديث وقت البومودورو من المدخلات
        function updatePomodoroTimeFromInputs() {
            const hours = parseInt(hoursInput.value) || 0;
            const minutes = parseInt(minutesInput.value) || 0;
            const seconds = parseInt(secondsInput.value) || 0;
            
            // حساب الوقت الإجمالي بالثواني
            pomodoroTime = hours * 3600 + minutes * 60 + seconds;
            
            // التحقق من أن الوقت أكبر من صفر
            if (pomodoroTime <= 0) {
                pomodoroTime = 1; // الحد الأدنى هو ثانية واحدة
                secondsInput.value = 1;
            }
            
            updatePomodoroDisplay();
        }
        
        hoursInput.addEventListener('change', function() {
            // التأكد من أن القيمة بين 0 و23
            if (hoursInput.value < 0) hoursInput.value = 0;
            if (hoursInput.value > 23) hoursInput.value = 23;
            updatePomodoroTimeFromInputs();
        });
        
        minutesInput.addEventListener('change', function() {
            // التأكد من أن القيمة بين 0 و59
            if (minutesInput.value < 0) minutesInput.value = 0;
            if (minutesInput.value > 59) minutesInput.value = 59;
            updatePomodoroTimeFromInputs();
        });
        
        secondsInput.addEventListener('change', function() {
            // التأكد من أن القيمة بين 0 و59
            if (secondsInput.value < 0) secondsInput.value = 0;
            if (secondsInput.value > 59) secondsInput.value = 59;
            updatePomodoroTimeFromInputs();
        });
        
        // وظائف البومودورو
        function startPomodoro() {
            if (!isPomodoroRunning) {
                isPomodoroRunning = true;
                isPomodoroPaused = false;
                startPomodoroBtn.disabled = true;
                pausePomodoroBtn.disabled = false;
                hoursInput.disabled = true;
                minutesInput.disabled = true;
                secondsInput.disabled = true;
                pomodoroTimer.classList.add('pomodoro-active');
                
                // استخدام requestAnimationFrame لتحديث المؤقت بدقة
                let lastTime = Date.now();
                
                function updateTimer() {
                    if (!isPomodoroRunning || isPomodoroPaused) return;
                    
                    const currentTime = Date.now();
                    const elapsed = Math.floor((currentTime - lastTime) / 1000);
                    
                    if (elapsed >= 1) {
                        lastTime = currentTime;
                        
                        if (pomodoroTime > 0) {
                            pomodoroTime--;
                            updatePomodoroDisplay();
                        } else {
                            clearPomodoroInterval();
                            isPomodoroRunning = false;
                            startPomodoroBtn.disabled = false;
                            pausePomodoroBtn.disabled = true;
                            hoursInput.disabled = false;
                            minutesInput.disabled = false;
                            secondsInput.disabled = false;
                            pomodoroTimer.classList.remove('pomodoro-active');
                            
                            // تشغيل صوت المنبه
                            alarmSound.play();
                            
                            alert('انتهى وقت البومودورو! خذ استراحة قصيرة.');
                            return;
                        }
                    }
                    
                    pomodoroInterval = requestAnimationFrame(updateTimer);
                }
                
                function clearPomodoroInterval() {
                    if (pomodoroInterval) {
                        cancelAnimationFrame(pomodoroInterval);
                        pomodoroInterval = null;
                    }
                }
                
                updateTimer();
            }
        }
        
        function pausePomodoro() {
            if (isPomodoroRunning && !isPomodoroPaused) {
                isPomodoroPaused = true;
                pausePomodoroBtn.textContent = 'متابعة';
            } else if (isPomodoroPaused) {
                isPomodoroPaused = false;
                pausePomodoroBtn.textContent = 'إيقاف';
                startPomodoro();
            }
        }
        
        function resetPomodoro() {
            if (pomodoroInterval) {
                cancelAnimationFrame(pomodoroInterval);
                pomodoroInterval = null;
            }
            
            updatePomodoroTimeFromInputs();
            isPomodoroRunning = false;
            isPomodoroPaused = false;
            startPomodoroBtn.disabled = false;
            pausePomodoroBtn.disabled = true;
            pausePomodoroBtn.textContent = 'إيقاف';
            hoursInput.disabled = false;
            minutesInput.disabled = false;
            secondsInput.disabled = false;
            pomodoroTimer.classList.remove('pomodoro-active');
            updatePomodoroDisplay();
        }
        
        function updatePomodoroDisplay() {
            const hours = Math.floor(pomodoroTime / 3600);
            const minutes = Math.floor((pomodoroTime % 3600) / 60);
            const seconds = pomodoroTime % 60;
            
            if (hours > 0) {
                pomodoroTimer.textContent = `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            } else {
                pomodoroTimer.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            }
        }
        
        // أحداث البومودورو
        startPomodoroBtn.addEventListener('click', startPomodoro);
        pausePomodoroBtn.addEventListener('click', pausePomodoro);
        resetPomodoroBtn.addEventListener('click', resetPomodoro);
        
        // الساعة والتاريخ
        function updateClock() {
            const now = new Date();
            
            // الوقت
            const hours = now.getHours().toString().padStart(2, '0');
            const minutes = now.getMinutes().toString().padStart(2, '0');
            const seconds = now.getSeconds().toString().padStart(2, '0');
            clockDisplay.textContent = `${hours}:${minutes}:${seconds}`;
            
            // التاريخ
            const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            const dateString = now.toLocaleDateString('ar-EG', options);
            dateDisplay.textContent = dateString;
        }
        
        // تحديث الساعة كل ثانية
        setInterval(updateClock, 1000);
        updateClock(); // التشغيل الأولي
        
        // إخفاء الأزرار
        let buttonsHidden = false;
        toggleButtonsBtn.addEventListener('click', function() {
            buttonsHidden = !buttonsHidden;
            if (buttonsHidden) {
                body.classList.add('buttons-hidden');
                toggleButtonsBtn.innerHTML = '👁‍🗨';
                toggleButtonsBtn.title = 'إظهار الأزرار';
            } else {
                body.classList.remove('buttons-hidden');
                toggleButtonsBtn.innerHTML = '👁';
                toggleButtonsBtn.title = 'إخفاء الأزرار';
            }
        });
        
        // التهيئة الأولية
        updatePomodoroDisplay();
    </script>
</body>
</html>
